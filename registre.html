<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription - Atlas Groupe International & AGRI-MARKET</title>
    <meta name="description" content="Créez votre compte Atlas Groupe AGRI-MARKET pour accéder au marché agricole du Burkina Faso.">

    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50"> <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Variables CSS pour faciliter la maintenance */
        :root {
            --primary-color: #4CAF50; /* Vert Agriculture */
            --secondary-color: #333; /* Texte foncé */
            --text-color: #555; /* Texte secondaire */
            --bg-light: #f4f7f6; /* Arrière-plan léger */
            --bg-white: #fff; /* Arrière-plan blanc */
            --border-color: #e0e0e0;
            --success-color: #2e8b57;
            --error-color: #b22222;

            /* Espacements */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-xxl: 3rem; /* Ajout d'une plus grande taille pour desktop */

            /* Tailles de police */
            --font-size-xs: 0.75rem;  /* 12px */
            --font-size-sm: 0.875rem; /* 14px */
            --font-size-md: 1rem;     /* 16px */
            --font-size-lg: 1.25rem;  /* 20px */
            --font-size-xl: 1.5rem;   /* 24px */
            --font-size-xxl: 2rem;    /* 32px pour les titres desktop */

            /* Autres */
            --border-radius: 8px;
            --border-radius-sm: 4px;
            --button-radius: 30px;
            --box-shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.08);
            --box-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s ease-in-out;
        }

        /* Réinitialisation et styles de base */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-image: url('https://i.imgur.com/d53OUqF.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Rend l'image de fond fixe */
            
            /* --- MODIFICATIONS CLÉS POUR LE CENTRAGE GLOBAL --- */
            display: flex;
            flex-direction: column; /* Empile les enfants (header, main, footer) verticalement */
            align-items: center; /* Centre les enfants horizontalement dans le body */
            min-height: 100vh; /* Assure que le body prend au moins toute la hauteur de la fenêtre */
            justify-content: flex-start; /* Aligne le contenu en haut par défaut, ajusté par la marge auto du main */
            /* --- FIN MODIFICATIONS CLÉS --- */

            color: var(--text-color);
            line-height: 1.6;
        }

        /* Header de l'application */
        .app-header {
            background-color: var(--primary-color);
            color: var(--bg-white);
            padding: var(--spacing-sm) var(--spacing-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: var(--box-shadow-md);
            z-index: 100;
            width: 100%; /* S'assure que le header prend toute la largeur disponible dans le body */
            max-width: 1200px; /* Limite sa largeur maximale pour le centrage global */
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1200px; /* Redondant si .app-header a déjà max-width, mais sécurisant */
            margin-bottom: var(--spacing-sm);
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
        }

        .logo-img {
            height: 40px; /* Taille légèrement augmentée pour le logo */
            margin-right: var(--spacing-sm);
        }

        .logo-text {
            font-size: var(--font-size-xl);
            font-weight: 700;
            white-space: nowrap;
        }

        .main-nav {
            width: 100%;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: var(--spacing-sm);
        }

        .main-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: var(--spacing-lg); /* Espacement entre les liens */
        }

        .main-nav li {
            margin: 0; /* Réinitialisation du margin pour le gap */
        }

        .main-nav a {
            color: var(--bg-white);
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: var(--font-size-md);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--border-radius-sm);
            transition: background-color var(--transition-speed);
        }

        .main-nav a i {
            margin-right: var(--spacing-xs);
            font-size: 1.1em;
        }

        .main-nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .main-nav a.active {
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Conteneur principal du formulaire */
        .container {
            width: 90%;
            max-width: 600px; /* Taille maximale pour un formulaire */
            /* --- MODIFICATION CLÉ POUR LE CENTRAGE GLOBAL --- */
            margin: var(--spacing-xl) auto; /* Conserve la marge auto pour le centrage vertical dans l'espace disponible */
            /* --- FIN MODIFICATION CLÉ --- */
            padding: var(--spacing-xl);
            background-color: var(--bg-white);
            box-shadow: var(--box-shadow-md);
            border-radius: var(--border-radius);
            box-sizing: border-box;
            flex-grow: 1; /* Permet au conteneur de prendre l'espace disponible */
        }

        .form-section h1 {
            font-family: 'Poppins', sans-serif;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: var(--spacing-xl);
            font-size: var(--font-size-xl);
            font-weight: 700;
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
            position: relative; /* Pour le positionnement de l'icône œil */
        }

        .form-group label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: bold;
            color: var(--secondary-color);
            font-size: var(--font-size-md);
        }

        .form-group label i {
            margin-right: var(--spacing-xs);
            color: var(--primary-color);
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="password"],
        .form-group input[type="date"],
        .form-group select {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            box-sizing: border-box;
            font-size: var(--font-size-md);
            color: var(--secondary-color);
            background-color: var(--bg-light);
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
            outline: none;
        }

        /* Style pour le bouton "Afficher/Masquer le mot de passe" */
        .toggle-password {
            position: absolute;
            right: var(--spacing-md);
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: var(--font-size-md);
            padding: var(--spacing-xs);
            transition: color var(--transition-speed);
        }

        .toggle-password:hover {
            color: var(--secondary-color);
        }
        .password-container {
            position: relative;
            display: flex;
            align-items: center;
        }
        .password-container input {
            padding-right: 3rem; /* Espace pour l'icône */
        }


        .terms-container {
            display: flex;
            align-items: center;
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            font-size: var(--font-size-sm);
        }

        .terms-container input[type="checkbox"] {
            margin-right: var(--spacing-sm);
            transform: scale(1.2); /* Rendre la checkbox légèrement plus grande */
        }

        .terms-container label {
            font-weight: normal;
            display: inline;
            color: var(--text-color);
        }

        .terms-container a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: text-decoration var(--transition-speed);
        }

        .terms-container a:hover {
            text-decoration: underline;
        }

        .submit-button {
            background-color: var(--primary-color);
            color: var(--bg-white);
            padding: var(--spacing-md) var(--spacing-xl);
            border: none;
            border-radius: var(--button-radius);
            cursor: pointer;
            font-size: var(--font-size-lg);
            transition: background-color var(--transition-speed), transform 0.2s ease-in-out;
            width: 100%;
            box-sizing: border-box;
            box-shadow: var(--box-shadow-sm);
        }

        .submit-button:hover {
            background-color: #388E3C; /* Vert plus foncé au survol */
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .status-message {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            text-align: center;
            font-size: var(--font-size-md);
            font-weight: 600;
            box-shadow: var(--box-shadow-sm);
        }

        .status-message.success {
            background-color: #e8f5e9; /* Vert pâle */
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .status-message.error {
            background-color: #ffebee; /* Rouge pâle */
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        .link {
            text-align: center;
            margin-top: var(--spacing-lg);
            color: var(--text-color);
            font-size: var(--font-size-sm);
        }

        .link a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        .link a:hover {
            text-decoration: underline;
        }

        /* Footer de l'application */
        .app-footer {
            width: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* Fond plus sombre pour le contraste */
            color: #ddd;
            text-align: center;
            padding: var(--spacing-md) 0;
            font-size: var(--font-size-sm);
            /* --- MODIFICATION CLÉ POUR LE CENTRAGE GLOBAL --- */
            margin-top: auto; /* Pousse le footer vers le bas si le contenu est court */
            /* --- FIN MODIFICATION CLÉ --- */
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            z-index: 99;
            max-width: 1200px; /* Limite sa largeur maximale pour le centrage global */
        }

        .app-footer .container {
            max-width: 1200px;
            padding: var(--spacing-sm) var(--spacing-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-md);
            background-color: transparent; /* Pas de fond blanc pour le footer-container */
            box-shadow: none;
            margin: 0 auto;
        }

        .app-footer .footer-links {
            list-style: none; /* Retirer les puces de la liste */
            padding: 0;
            margin: 0;
            display: flex;
            gap: var(--spacing-lg);
            flex-wrap: wrap;
            justify-content: center;
        }

        .app-footer .footer-links a {
            color: #eee;
            text-decoration: none;
            transition: color var(--transition-speed);
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .app-footer .footer-links a:hover {
            color: var(--bg-white);
        }

        .app-footer p {
            margin: 0;
            font-size: var(--font-size-xs);
            color: #bbb;
        }

        /* Media Queries pour la responsivité */
        @media (min-width: 768px) {
            .app-header {
                flex-direction: row;
                justify-content: space-between;
                padding: var(--spacing-md) var(--spacing-xl);
            }
            .header-top {
                margin-bottom: 0;
            }
            .logo-img {
                height: 50px;
            }
            .logo-text {
                font-size: var(--font-size-xxl); /* Plus grand sur desktop */
            }
            .main-nav {
                width: auto;
                border-top: none;
                padding-top: 0;
            }
            .main-nav ul {
                justify-content: flex-end; /* Aligner à droite */
            }
            .main-nav a {
                font-size: var(--font-size-lg);
            }
            .container {
                padding: var(--spacing-xxl);
                margin: var(--spacing-xxl) auto;
            }
            .form-section h1 {
                font-size: var(--font-size-xxl);
            }
        }

        @media (max-width: 480px) {
            .logo-img {
                height: 35px;
            }
            .logo-text {
                font-size: var(--font-size-lg);
            }
            .main-nav a {
                font-size: var(--font-size-sm);
                padding: var(--spacing-xs);
            }
            .container {
                padding: var(--spacing-lg);
                margin: var(--spacing-lg) auto;
            }
            .form-section h1 {
                font-size: var(--font-size-xl);
            }
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div class="header-top">
            <a href="index.html" class="logo" aria-label="Accueil Atlas Groupe International">
                <img src="https://i.imgur.com/6YRySSd.jpeg" alt="Logo Atlas Groupe International" class="logo-img">
                <span class="logo-text">Atlas Groupe AGRI-MARKET</span>
            </a>
            </div>
        <nav class="main-nav" aria-label="Navigation principale">
            <ul>
                <li><a href="index.html" aria-label="Aller à la page d'accueil"><i class="ri-home-4-line" aria-hidden="true"></i> Accueil</a></li>
                <li><a href="registre.html" class="active" aria-label="S'inscrire sur AGRI-MARKET"><i class="ri-user-add-line" aria-hidden="true"></i> S'inscrire</a></li>
                <li><a href="connect.html" aria-label="Se connecter à AGRI-MARKET"><i class="ri-login-box-line" aria-hidden="true"></i> Se connecter</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section id="registerSection" class="form-section" aria-labelledby="register-title">
            <h1 id="register-title">CRÉEZ VOTRE COMPTE AGRI-MARKET</h1>
            <form id="registerForm" novalidate>
                <div class="form-group">
                    <label for="newUsername"><i class="ri-user-line" aria-hidden="true"></i> Nom d'utilisateur:</label>
                    <input type="text" id="newUsername" name="newUsername" required aria-required="true" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="newEmail"><i class="ri-mail-line" aria-hidden="true"></i> Email:</label>
                    <input type="email" id="newEmail" name="newEmail" required aria-required="true" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="newPassword"><i class="ri-lock-line" aria-hidden="true"></i> Mot de Passe:</label>
                    <div class="password-container">
                        <input type="password" id="newPassword" name="newPassword" required aria-required="true" autocomplete="new-password">
                        <button type="button" id="toggleNewPassword" class="toggle-password" aria-label="Afficher/masquer le mot de passe">
                            <i class="ri-eye-line" aria-hidden="true"></i> </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="confirmPassword"><i class="ri-lock-password-line" aria-hidden="true"></i> Confirmer le mot de passe:</label>
                    <div class="password-container">
                        <input type="password" id="confirmPassword" name="confirmPassword" required aria-required="true" autocomplete="new-password">
                        <button type="button" id="toggleConfirmPassword" class="toggle-password" aria-label="Afficher/masquer le mot de passe de confirmation">
                            <i class="ri-eye-line" aria-hidden="true"></i> </button>
                    </div>
                </div>
                <div class="terms-container">
                    <input type="checkbox" id="registerTerms" name="registerTerms" required aria-required="true">
                    <label for="registerTerms">J'accepte les <a href="conditions.html" target="_blank" rel="noopener noreferrer">conditions générales d'utilisation</a></label>
                </div>
                <button type="submit" class="submit-button"><i class="ri-user-add-line" aria-hidden="true"></i> S'INSCRIRE</button>
            </form>
            <div id="registerStatusMessage" class="status-message" role="alert" aria-live="polite"></div>
            <div class="link">
                <a href="connect.html">Déjà un compte ? Connectez-vous ici.</a>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <div class="container">
            <nav class="footer-links" aria-label="Liens du pied de page">
                <a href="conditions.html" aria-label="Lire les conditions d'utilisation"><i class="ri-file-text-line" aria-hidden="true"></i> Conditions d'utilisation</a>
                <a href="confidentialite.html" aria-label="Lire la politique de confidentialité"><i class="ri-shield-line" aria-hidden="true"></i> Politique de confidentialité</a>
                <a href="contact.html" aria-label="Contacter le support"><i class="ri-mail-line" aria-hidden="true"></i> Contactez-nous</a>
            </nav>
            <p>&copy; 2025 Atlas Groupe International, AGRI-MARKET & AG-COIN. Burkina Faso, Tous droits réservés.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const registerForm = document.getElementById('registerForm');
            const registerStatusMessageDiv = document.getElementById('registerStatusMessage');

            // --- Fonctionnalité Afficher/Masquer le mot de passe ---
            function setupPasswordToggle(inputId, buttonId) {
                const passwordInput = document.getElementById(inputId);
                const toggleButton = document.getElementById(buttonId);

                if (passwordInput && toggleButton) {
                    toggleButton.addEventListener('click', () => {
                        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                        passwordInput.setAttribute('type', type);
                        // Changer l'icône de l'œil
                        toggleButton.querySelector('i').className = type === 'password' ? 'ri-eye-line' : 'ri-eye-off-line';
                        // Optionnel: Mettre le focus sur le champ après le toggle pour une meilleure UX
                        passwordInput.focus();
                    });
                }
            }

            setupPasswordToggle('newPassword', 'toggleNewPassword');
            setupPasswordToggle('confirmPassword', 'toggleConfirmPassword');
            // --- Fin Fonctionnalité Afficher/Masquer le mot de passe ---

            if (registerForm) {
                registerForm.addEventListener('submit', (event) => {
                    event.preventDefault(); // Empêcher le rechargement de la page

                    const newUsernameInput = document.getElementById('newUsername');
                    const newEmailInput = document.getElementById('newEmail');
                    const newPasswordInput = document.getElementById('newPassword');
                    const confirmPasswordInput = document.getElementById('confirmPassword');
                    const registerTermsCheckbox = document.getElementById('registerTerms');

                    const newUsername = newUsernameInput.value.trim();
                    const newEmail = newEmailInput.value.trim();
                    const newPassword = newPasswordInput.value;
                    const confirmPassword = confirmPasswordInput.value;
                    const termsAccepted = registerTermsCheckbox.checked;

                    // Réinitialiser les messages d'erreur/succès
                    displayStatus(registerStatusMessageDiv, '', '');

                    // --- Validation côté client ---
                    if (!newUsername || !newEmail || !newPassword || !confirmPassword) {
                        displayStatus(registerStatusMessageDiv, 'Tous les champs sont obligatoires.', 'error');
                        return;
                    }

                    if (newPassword.length < 8) {
                        displayStatus(registerStatusMessageDiv, 'Le mot de passe doit contenir au moins 8 caractères.', 'error');
                        return;
                    }

                    if (newPassword !== confirmPassword) {
                        displayStatus(registerStatusMessageDiv, 'Les mots de passe ne correspondent pas.', 'error');
                        return;
                    }

                    if (!termsAccepted) {
                        displayStatus(registerStatusMessageDiv, 'Vous devez accepter les conditions générales d\'utilisation.', 'error');
                        return;
                    }

                    // --- Logique d'enregistrement avec localStorage ---
                    let users = JSON.parse(localStorage.getItem('users')) || [];

                    // Vérifier si l'utilisateur ou l'email existe déjà
                    const userExists = users.some(user => user.username === newUsername || user.email === newEmail);

                    if (userExists) {
                        displayStatus(registerStatusMessageDiv, 'Un compte avec ce nom d\'utilisateur ou cet email existe déjà.', 'error');
                        return;
                    }

                    // Ajouter le nouvel utilisateur
                    const newUser = {
                        username: newUsername,
                        email: newEmail,
                        password: newPassword // Dans une vraie app, hacher le mot de passe avant de stocker
                    };
                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));

                    displayStatus(registerStatusMessageDiv, 'Inscription réussie ! Vous pouvez maintenant vous connecter.', 'success');

                    // Optionnel: vider le formulaire après l'inscription
                    registerForm.reset();

                    setTimeout(() => {
                        window.location.href = 'KYC.html'; // Rediriger vers la page de connexion
                    }, 2000); // Redirection après 2 secondes
                });
            }

            // --- Fonction pour afficher les messages de statut ---
            function displayStatus(element, message, type) {
                if (element) {
                    element.textContent = message;
                    element.className = 'status-message ' + type; // Ajoute 'success' ou 'error'
                }
            }
        });
    </script>
</body>
</html>
